import{U as I,T as k,X as S,aa as T,V as A,ar as L,e as a,a8 as D,a0 as N,aA as H,c as R,r as $,ag as M,a as V,o as p,d as x,az as t,ax as m,aH as h,ai as q,ay as E,aw as O,f as b}from"./_plugin-vue_export-helper-17771205.js";import{g as j,I as z,q as F,t as K,k as U,h as X,w,d as Y}from"./index-d1c9b409.js";/* empty css              */import"./index-da9f860d.js";import{a as G}from"./good-fa39116a.js";import{s as J}from"./SimpleHeader-194467f3.js";import{A as Q,a as W,b as Z}from"./index-8dddb981.js";import{r as tt,u as ot}from"./use-route-8af935f0.js";import"./use-placeholder-963901be.js";const[at,g]=I("action-bar-icon"),et=k({},tt,{dot:Boolean,text:String,icon:String,color:String,badge:S,iconClass:T,badgeProps:Object,iconPrefix:String});var st=A({name:at,props:et,setup(l,{slots:c}){const r=ot();L(Q);const n=()=>{const{dot:o,badge:d,icon:u,color:_,iconClass:s,badgeProps:e,iconPrefix:i}=l;return c.icon?a(j,D({dot:o,class:g("icon"),content:d},e),{default:c.icon}):a(z,{tag:"div",dot:o,name:u,badge:d,color:_,class:[g("icon"),s],badgeProps:e,classPrefix:i},null)};return()=>a("div",{role:"button",class:g(),tabindex:0,onClick:r},[n(),c.default?c.default():l.text])}});const nt=N(st);const ct={class:"product-detail"},it={class:"detail-content"},rt={class:"detail-swipe-wrap"},dt=["src"],lt={class:"product-info"},ut={class:"product-title"},_t=t("div",{class:"product-desc"},"免邮费 顺丰快递",-1),pt={class:"product-price"},mt={class:"product-intro"},gt=t("ul",null,[t("li",null,"概述"),t("li",null,"参数"),t("li",null,"安装服务"),t("li",null,"常见问题")],-1),ft=["innerHTML"],It={__name:"ProductDetail",setup(l){const c=H(),r=R(),n=F(),o=$({detail:{goodsCarouselList:[]}});M(async()=>{const{id:s}=c.params,{data:e}=await G(s);e.goodsCarouselList=e.goodsCarouselList.map(i=>K(i)),o.detail=e,n.updateCart()}),V(()=>{const s=document.querySelector(".detail-content");s.scrollTop=0});const d=()=>{r.push({path:"/cart"})},u=async()=>{const{resultCode:s}=await w({goodsCount:1,goodsId:o.detail.goodsId});s==200&&Y("添加成功"),n.updateCart()},_=async()=>{await w({goodsCount:1,goodsId:o.detail.goodsId}),n.updateCart(),r.push({path:"/cart"})};return(s,e)=>{const i=U,P=X,f=nt,C=W,y=Z;return p(),x("div",ct,[a(J,{name:"商品详情"}),t("div",it,[t("div",rt,[a(P,{class:"my-swipe","indicator-color":"#1baeae"},{default:m(()=>[(p(!0),x(q,null,E(o.detail.goodsCarouselList,(v,B)=>(p(),O(i,{key:B},{default:m(()=>[t("img",{src:v,alt:""},null,8,dt)]),_:2},1024))),128))]),_:1})]),t("div",lt,[t("div",ut,h(o.detail.goodsName||""),1),_t,t("div",pt,[t("span",null,"¥"+h(o.detail.sellingPrice||""),1)])]),t("div",mt,[gt,t("div",{class:"product-content",innerHTML:o.detail.goodsDetailContent||""},null,8,ft)])]),a(y,null,{default:m(()=>[a(f,{icon:"chat-o",text:"客服"}),a(f,{icon:"cart-o",badge:b(n).count?b(n).count:"",onClick:e[0]||(e[0]=v=>d()),text:"购物车"},null,8,["badge"]),a(C,{type:"warning",onClick:u,text:"加入购物车"}),a(C,{type:"danger",onClick:_,text:"立即购买"})]),_:1})])}}};export{It as default};
