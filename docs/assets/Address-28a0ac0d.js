import{U as g,V as p,ak as $,J as I,b1 as A,e as r,X as x,aa as C,a0 as _,ar as B,au as P,a8 as S,aY as w,T as D,b0 as v,Z as L,aA as E,c as N,r as R,ag as q,o as k,d as z,az as U,aw as V}from"./_plugin-vue_export-helper-17771205.js";import{I as F}from"./index-ec7f1cc8.js";import{T as G}from"./index-88f2a2ec.js";import{C as O}from"./index-43bf36ba.js";/* empty css              */import{B as Y}from"./index-80a81a32.js";import{c as j,s as H}from"./index-4666d7eb.js";import{s as J}from"./SimpleHeader-194467f3.js";import{b as K}from"./address-4b069d6f.js";import"./use-route-8af935f0.js";const[T,M]=g("radio-group"),X={disabled:Boolean,iconSize:x,direction:String,modelValue:C,checkedColor:String},y=Symbol(T);var Z=p({name:T,props:X,emits:["change","update:modelValue"],setup(e,{emit:d,slots:o}){const{linkChildren:t}=$(y),u=i=>d("update:modelValue",i);return I(()=>e.modelValue,i=>d("change",i)),t({props:e,updateValue:u}),A(()=>e.modelValue),()=>{var i;return r("div",{class:M([e.direction]),role:"radiogroup"},[(i=o.default)==null?void 0:i.call(o)])}}});const Q=_(Z),[W,ee]=g("radio");var te=p({name:W,props:j,emits:["update:modelValue"],setup(e,{emit:d,slots:o}){const{parent:t}=B(y),u=()=>(t?t.props.modelValue:e.modelValue)===e.name,i=()=>{t?t.updateValue(e.name):d("update:modelValue",e.name)};return()=>r(H,S({bem:ee,role:"radio",parent:t,checked:u(),onToggle:i},e),P(o,["default","icon"]))}});const ae=_(te),[de,m]=g("address-item");var se=p({name:de,props:{address:w(Object),disabled:Boolean,switchable:Boolean,defaultTagText:String},emits:["edit","click","select"],setup(e,{slots:d,emit:o}){const t=()=>{e.switchable&&o("select"),o("click")},u=()=>r(F,{name:"edit",class:m("edit"),onClick:s=>{s.stopPropagation(),o("edit"),o("click")}},null),i=()=>{if(d.tag)return d.tag(e.address);if(e.address.isDefault&&e.defaultTagText)return r(G,{type:"primary",round:!0,class:m("tag")},{default:()=>[e.defaultTagText]})},n=()=>{const{address:s,disabled:l,switchable:c}=e,a=[r("div",{class:m("name")},[`${s.name} ${s.tel}`,i()]),r("div",{class:m("address")},[s.address])];return c&&!l?r(ae,{name:s.id,iconSize:18},{default:()=>[a]}):a};return()=>{var s;const{disabled:l}=e;return r("div",{class:m({disabled:l}),onClick:t},[r(O,{border:!1,titleClass:m("title")},{title:n,"right-icon":u}),(s=d.bottom)==null?void 0:s.call(d,D({},e.address,{disabled:l}))])}}});const[oe,b,ne]=g("address-list"),le={list:v(),modelValue:x,switchable:L,disabledText:String,disabledList:v(),addButtonText:String,defaultTagText:String};var re=p({name:oe,props:le,emits:["add","edit","select","clickItem","editDisabled","selectDisabled","update:modelValue"],setup(e,{slots:d,emit:o}){const t=(n,s,l)=>{const c=()=>o(l?"editDisabled":"edit",n,s),a=()=>o("clickItem",n,s),f=()=>{o(l?"selectDisabled":"select",n,s),l||o("update:modelValue",n.id)};return r(se,{key:n.id,address:n,disabled:l,switchable:e.switchable,defaultTagText:e.defaultTagText,onEdit:c,onClick:a,onSelect:f},{bottom:d["item-bottom"],tag:d.tag})},u=(n,s)=>{if(n)return n.map((l,c)=>t(l,c,s))},i=()=>r("div",{class:[b("bottom"),"van-safe-area-bottom"]},[r(Y,{round:!0,block:!0,type:"primary",text:e.addButtonText||ne("add"),class:b("add"),onClick:()=>o("add")},null)]);return()=>{var n,s;const l=u(e.list),c=u(e.disabledList,!0),a=e.disabledText&&r("div",{class:b("disabled-text")},[e.disabledText]);return r("div",{class:b()},[(n=d.top)==null?void 0:n.call(d),r(Q,{modelValue:e.modelValue},{default:()=>[l]}),a,c,(s=d.default)==null?void 0:s.call(d),i()])}}});const ie=_(re);const ce={class:"address-box"},ue={class:"address-item"},xe={__name:"Address",setup(e){var l;const d=E(),o=N(),t=R({chosenAddressId:"1",list:[],from:((l=d==null?void 0:d.query)==null?void 0:l.from)??""});q(()=>{u()});const u=async()=>{const{data:c}=await K();if(!c){t.list=[];return}t.list=c.map(a=>({id:a.addressId,name:a.userName,tel:a.userPhone,address:`${a.provinceName} ${a.cityName} ${a.regionName} ${a.detailAddress}`,isDefault:!!a.defaultFlag}))},i=()=>{o.push({path:"address-edit",query:{type:"add",from:t.from}})},n=c=>{o.push({path:"address-edit",query:{type:"edit",addressId:c.id,from:t.from}})},s=(c,a)=>{o.push({path:"create-order",query:{addressId:c.id,from:t.from}})};return(c,a)=>{const f=ie;return k(),z("div",ce,[r(J,{name:"地址管理",back:t.from=="create-order"?"":"/user"},null,8,["back"]),U("div",ue,[t.from!="mine"?(k(),V(f,{key:0,modelValue:t.chosenAddressId,"onUpdate:modelValue":a[0]||(a[0]=h=>t.chosenAddressId=h),list:t.list,"default-tag-text":"默认",onAdd:i,onEdit:n,onSelect:s},null,8,["modelValue","list"])):(k(),V(f,{key:1,modelValue:t.chosenAddressId,"onUpdate:modelValue":a[1]||(a[1]=h=>t.chosenAddressId=h),list:t.list,"default-tag-text":"默认",onAdd:i,onEdit:n},null,8,["modelValue","list"]))])])}}};export{xe as default};
