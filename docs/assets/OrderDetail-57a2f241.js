import{U as q,T as O,X as Q,aa as X,Y,Z as A,V as Z,F as G,r as V,e as l,a8 as $,au as J,W as ee,n as H,aM as te,a1 as oe,a0 as ne,av as ae,aA as le,ag as se,o as _,d as R,az as a,aH as S,aw as P,ax as B,a$ as I,ai as re,ay as ce,aF as p,aC as ie,aD as de}from"./_plugin-vue_export-helper-17771205.js";import{K as ue,M as me,P as L,N as fe,O as he,Q as ge,j as _e,R as Be,U as we,m as Ce,p as pe,d as U}from"./index-ec7f1cc8.js";/* empty css              */import{C as ye}from"./index-0f2397c5.js";import"./index-88f2a2ec.js";/* empty css              */import{B as F}from"./index-80a81a32.js";import{s as be}from"./SimpleHeader-194467f3.js";import{a as ve,b as ke,d as Se,p as Pe}from"./order-972c975a.js";import{a as K,b as xe}from"./index-0d88beee.js";import"./use-route-8af935f0.js";import"./use-placeholder-58a10607.js";const[Oe,i,x]=q("dialog"),Te=O({},ue,{title:String,theme:String,width:Q,message:[String,Function],callback:Function,allowHtml:Boolean,className:X,transition:Y("van-dialog-bounce"),messageAlign:String,closeOnPopstate:A,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,cancelButtonDisabled:Boolean,confirmButtonText:String,confirmButtonColor:String,confirmButtonDisabled:Boolean,showConfirmButton:A,closeOnClickOverlay:Boolean}),De=[...me,"transition","closeOnPopstate"];var z=Z({name:Oe,props:Te,emits:["confirm","cancel","keydown","update:show"],setup(e,{emit:u,slots:t}){const d=G(),m=V({confirm:!1,cancel:!1}),b=o=>u("update:show",o),v=o=>{var c;b(!1),(c=e.callback)==null||c.call(e,o)},w=o=>()=>{e.show&&(u(o),e.beforeClose?(m[o]=!0,_e(e.beforeClose,{args:[o],done(){v(o),m[o]=!1},canceled(){m[o]=!1}})):v(o))},C=w("cancel"),s=w("confirm"),n=fe(o=>{var c,f;if(o.target!==((f=(c=d.value)==null?void 0:c.popupRef)==null?void 0:f.value))return;({Enter:e.showConfirmButton?s:H,Escape:e.showCancelButton?C:H})[o.key](),u("keydown",o)},["enter","esc"]),g=()=>{const o=t.title?t.title():e.title;if(o)return l("div",{class:i("header",{isolated:!e.message&&!t.default})},[o])},T=o=>{const{message:c,allowHtml:f,messageAlign:h}=e,k=i("message",{"has-title":o,[h]:h}),N=te(c)?c():c;return f&&typeof N=="string"?l("div",{class:k,innerHTML:N},null):l("div",{class:k},[N])},D=()=>{if(t.default)return l("div",{class:i("content")},[t.default()]);const{title:o,message:c,allowHtml:f}=e;if(c){const h=!!(o||t.title);return l("div",{key:f?1:0,class:i("content",{isolated:!h})},[T(h)])}},r=()=>l("div",{class:[ge,i("footer")]},[e.showCancelButton&&l(F,{size:"large",text:e.cancelButtonText||x("cancel"),class:i("cancel"),style:{color:e.cancelButtonColor},loading:m.cancel,disabled:e.cancelButtonDisabled,onClick:C},null),e.showConfirmButton&&l(F,{size:"large",text:e.confirmButtonText||x("confirm"),class:[i("confirm"),{[he]:e.showCancelButton}],style:{color:e.confirmButtonColor},loading:m.confirm,disabled:e.confirmButtonDisabled,onClick:s},null)]),W=()=>l(xe,{class:i("footer")},{default:()=>[e.showCancelButton&&l(K,{type:"warning",text:e.cancelButtonText||x("cancel"),class:i("cancel"),color:e.cancelButtonColor,loading:m.cancel,disabled:e.cancelButtonDisabled,onClick:C},null),e.showConfirmButton&&l(K,{type:"danger",text:e.confirmButtonText||x("confirm"),class:i("confirm"),color:e.confirmButtonColor,loading:m.confirm,disabled:e.confirmButtonDisabled,onClick:s},null)]}),j=()=>t.footer?t.footer():e.theme==="round-button"?W():r();return()=>{const{width:o,title:c,theme:f,message:h,className:k}=e;return l(L,$({ref:d,role:"dialog",class:[i([f]),k],style:{width:ee(o)},tabindex:0,"aria-labelledby":c||h,onKeydown:n,"onUpdate:show":b},J(e,De)),{default:()=>[g(),D(),j()]})}}});let E;const Ne={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,cancelButtonDisabled:!1,confirmButtonText:"",confirmButtonColor:null,confirmButtonDisabled:!1,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1};let Ie=O({},Ne);function Fe(){({instance:E}=Be({setup(){const{state:u,toggle:t}=we();return()=>l(z,$(u,{"onUpdate:show":t}),null)}}))}function Ee(e){return oe?new Promise((u,t)=>{E||Fe(),E.open(O({},Ie,e,{callback:d=>{(d==="confirm"?u:t)(d)}}))}):Promise.resolve()}const M=e=>Ee(O({showCancelButton:!0},e));ne(z);const y=e=>(ie("data-v-3502c63e"),e=e(),de(),e),Ae={class:"order-detail-box"},He={class:"order-status"},Re={class:"status-item"},Ue=y(()=>a("label",null,"订单状态：",-1)),Ke={class:"status-item"},Me=y(()=>a("label",null,"订单编号：",-1)),Ve={class:"status-item"},$e=y(()=>a("label",null,"下单时间：",-1)),Le={class:"order-price"},ze={class:"price-item"},We=y(()=>a("label",null,"商品金额：",-1)),je=y(()=>a("div",{class:"price-item"},[a("label",null,"配送方式："),a("span",null,"普通快递")],-1)),qe={style:{width:"90%",margin:"0 auto",padding:"20px 0"}},Qe={__name:"OrderDetail",setup(e){const u=le(),t=V({detail:{},showPay:!1});se(()=>{d()});const d=async()=>{Ce({message:"加载中...",forbidClick:!0});const{id:s}=u.query,{data:n}=await ve(s);t.detail=n,pe()},m=s=>{M({title:"确认取消订单？"}).then(()=>{ke(s).then(n=>{n.resultCode==200&&(U("删除成功"),d())})}).catch(()=>{})},b=s=>{M({title:"是否确认订单？"}).then(()=>{Se(s).then(n=>{n.resultCode==200&&(U("确认成功"),d())})}).catch(()=>{})},v=()=>{t.showPay=!0},w=async(s,n)=>{await Pe({orderNo:s,payType:n}),t.showPay=!1,d()},C=()=>{};return(s,n)=>{const g=F,T=ye,D=L;return _(),R("div",Ae,[l(be,{name:"订单详情",onCallback:C}),a("div",He,[a("div",Re,[Ue,a("span",null,S(t.detail.orderStatusString),1)]),a("div",Ke,[Me,a("span",null,S(t.detail.orderNo),1)]),a("div",Ve,[$e,a("span",null,S(t.detail.createTime),1)]),t.detail.orderStatus==3?(_(),P(g,{key:0,style:{"margin-bottom":"10px"},color:"#1baeae",block:"",onClick:n[0]||(n[0]=r=>b(t.detail.orderNo))},{default:B(()=>[p("确认收货")]),_:1})):I("",!0),t.detail.orderStatus==0?(_(),P(g,{key:1,style:{"margin-bottom":"10px"},color:"#1baeae",block:"",onClick:v},{default:B(()=>[p("去支付")]),_:1})):I("",!0),t.detail.orderStatus<0||t.detail.orderStatus==4?I("",!0):(_(),P(g,{key:2,block:"",onClick:n[1]||(n[1]=r=>m(t.detail.orderNo))},{default:B(()=>[p("取消订单")]),_:1}))]),a("div",Le,[a("div",ze,[We,a("span",null,"¥ "+S(t.detail.totalPrice),1)]),je]),(_(!0),R(re,null,ce(t.detail.newBeeMallOrderItemVOS,r=>(_(),P(T,{key:r.goodsId,style:{background:"#fff"},num:r.goodsCount,price:r.sellingPrice,desc:"全场包邮",title:r.goodsName,thumb:s.$filters.prefix(r.goodsCoverImg)},null,8,["num","price","title","thumb"]))),128)),l(D,{show:t.showPay,"onUpdate:show":n[4]||(n[4]=r=>t.showPay=r),position:"bottom",style:{height:"24%"}},{default:B(()=>[a("div",qe,[l(g,{style:{marginBottom:"10px"},color:"#1989fa",block:"",onClick:n[2]||(n[2]=r=>w(t.detail.orderNo,1))},{default:B(()=>[p("支付宝支付")]),_:1}),l(g,{color:"#4fc08d",block:"",onClick:n[3]||(n[3]=r=>w(t.detail.orderNo,2))},{default:B(()=>[p("微信支付")]),_:1})])]),_:1},8,["show"])])}}},rt=ae(Qe,[["__scopeId","data-v-3502c63e"]]);export{rt as default};
